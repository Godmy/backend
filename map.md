# Карта проекта Backend (Site Map)

Этот документ представляет собой карту файлов и папок backend проекта. Он помогает понять структуру проекта и предназначение каждого файла.

## Структура проекта

```
Путь и файлы проекта Backend       # Описание функций файла с исходным кодом приложения         # Файл с документацией по исходному коду
├── alembic/                       # Миграции базы данных с помощью Alembic                     # ./docs/DATABASE_INITIALIZATION.md
│   ├── env.py                     # Основной скрипт окружения для Alembic
│   ├── README                     # Документация по использованию Alembic
│   ├── script.py.mako             # Шаблон для генерации новых миграций
│   └── versions/                  # Каталог для файлов миграций (пустой)
├── auth/                          # Модуль аутентификации и авторизации                        # ./docs/EMAIL_VERIFICATION_IMPLEMENTATION.md
│   ├── __init__.py                # Инициализация модуля аутентификации
│   ├── dependencies/              # Зависимости для проверки аутентификации
│   │   ├── __init__.py            # Инициализация зависимостей аутентификации
│   │   └── auth.py                # Реализация зависимости аутентификации
│   ├── models/                    # Модели для аутентификации
│   │   ├── __init__.py            # Инициализация моделей аутентификации
│   │   ├── oauth.py               # Модели OAuth
│   │   ├── permission.py          # Модели разрешений
│   │   ├── profile.py             # Модели профилей пользователей
│   │   ├── role.py                # Модели ролей
│   │   └── user.py                # Модели пользователей
│   ├── schemas/                   # Схемы Pydantic для аутентификации
│   │   ├── __init__.py            # Инициализация схем аутентификации
│   │   ├── admin.py               # Схемы администратора
│   │   ├── auth.py                # Схемы аутентификации
│   │   ├── role.py                # Схемы ролей
│   │   └── user.py                # Схемы пользователей
│   ├── services/                  # Сервисы для аутентификации
│   │   ├── __init__.py            # Инициализация сервисов аутентификации
│   │   ├── admin_service.py       # Сервисы администратора
│   │   ├── auth_service.py        # Сервисы аутентификации
│   │   ├── oauth_service.py       # Сервисы OAuth
│   │   ├── permission_service.py  # Сервисы разрешений
│   │   ├── profile_service.py     # Сервисы профилей
│   │   ├── token_service.py       # Сервисы токенов
│   │   └── user_service.py        # Сервисы пользователей
│   └── utils/                     # Вспомогательные функции аутентификации
│       ├── __init__.py            # Инициализация утилит аутентификации
│       ├── jwt_handler.py         # Обработчик JWT токенов
│       └── security.py            # Функции безопасности
├── core/                          # Основные компоненты приложения                            # ./docs/BASE_MODEL_GUIDE.md
│   ├── __init__.py                # Инициализация основного модуля
│   ├── celery_app.py              # Конфигурация приложения Celery
│   ├── config.py                  # Конфигурация приложения
│   ├── context.py                 # Контекст приложения
│   ├── database.py                # Настройки подключения к базе данных
│   ├── db_stats.py                # Утилиты статистики базы данных
│   ├── decorators/                # Декораторы для приложения
│   │   ├── __init__.py            # Инициализация декораторов
│   │   └── cache.py               # Декораторы кэширования
│   ├── email_service.py           # Сервис отправки email
│   ├── file_storage.py            # Утилиты для хранения файлов
│   ├── graphql/                   # Компоненты GraphQL
│   │   ├── __init__.py            # Инициализация GraphQL
│   │   ├── graphql_context.py     # Контекст GraphQL
│   │   └── playground.py          # GraphQL Playground
│   ├── graphql_extensions.py      # Расширения GraphQL
│   ├── init_db.py                 # Скрипт инициализации базы данных
│   ├── metrics.py                 # Утилиты метрик приложения
│   ├── middleware/                # Промежуточное ПО (middleware)
│   │   ├── __init__.py            # Инициализация middleware
│   │   ├── cache_control.py       # Контроль кэширования
│   │   ├── celery_context.py      # Контекст Celery
│   │   ├── metrics.py             # Метрики
│   │   ├── rate_limit.py          # Ограничение частоты запросов
│   │   ├── request_logging.py     # Логирование запросов
│   │   ├── security_headers.py    # Заголовки безопасности
│   │   └── shutdown.py            # Обработка завершения работы
│   ├── models/                    # Основные модели приложения
│   │   ├── __init__.py            # Инициализация моделей
│   │   ├── ARCHITECTURE.md        # Архитектурные решения для моделей
│   │   ├── audit_log.py           # Модель журнала аудита
│   │   ├── base.py                # Базовая модель
│   │   ├── file.py                # Модель файлов
│   │   ├── import_export_job.py   # Модель заданий импорта/экспорта
│   │   └── mixins/                # Миксины для моделей
│   │       ├── __init__.py        # Инициализация миксинов
│   │       ├── audit_metadata.py  # Метаданные аудита
│   │       ├── combinations.py    # Комбинации полей
│   │       ├── gdpr.py            # Миксины GDPR
│   │       ├── metadata.py        # Общие метаданные
│   │       ├── README.md          # Документация миксинов
│   │       ├── soft_delete.py     # Мягкое удаление
│   │       ├── tenant.py          # Поддержка мультитенантности
│   │       └── versioned.py       # Версионирование записей
│   ├── redis_client.py            # Клиент Redis
│   ├── routes/                    # Основные маршруты API
│   │   ├── __init__.py            # Инициализация маршрутов
│   │   ├── health.py              # Маршрут проверки работоспособности
│   │   ├── metrics.py             # Маршрут метрик
│   │   ├── playground_utils.py    # Утилиты для Playground
│   │   ├── root.py                # Корневой маршрут
│   │   └── static_files.py        # Маршруты статических файлов
│   ├── schemas/                   # Основные схемы Pydantic
│   │   ├── __init__.py            # Инициализация схем
│   │   ├── audit.py               # Схемы аудита
│   │   ├── file.py                # Схемы файлов
│   │   ├── import_export.py       # Схемы импорта/экспорта
│   │   ├── schema.py              # Основная GraphQL схема
│   │   └── soft_delete.py         # Схемы мягкого удаления
│   ├── sentry.py                  # Интеграция с Sentry для отслеживания ошибок
│   ├── services/                  # Основные сервисы приложения
│   │   ├── __init__.py            # Инициализация сервисов
│   │   ├── audit_service.py       # Сервис аудита
│   │   ├── backup_service.py      # Сервис резервного копирования
│   │   ├── cache_service.py       # Сервис кэширования
│   │   ├── dataloader.py          # Загрузчик данных для GraphQL
│   │   ├── export_service.py      # Сервис экспорта данных
│   │   ├── file_service.py        # Сервис файлов
│   │   ├── health_service.py      # Сервис проверки состояния
│   │   ├── import_service.py      # Сервис импорта данных
│   │   ├── migration_service.py   # Сервис миграций
│   │   └── query_profiler.py      # Профилировщик запросов
│   ├── shutdown.py                # Обработка завершения работы приложения
│   ├── structured_logging.py      # Структурированное логирование
│   ├── tasks.py                   # Основные задачи Celery
│   └── uploads/                   # Утилиты загрузки файлов
│       └── __init__.py            # Инициализация загрузки файлов
├── languages/                     # Модуль языков, концепций и словарей                        # ./docs/features/LANGUAGES.md
│   ├── __init__.py                # Инициализация модуля языков
│   ├── models/                    # Модели языков, концепций и словарей
│   │   ├── __init__.py            # Инициализация моделей языков
│   │   ├── concept.py             # Модель концепций
│   │   ├── dictionary.py          # Модель словарей
│   │   └── language.py            # Модель языков
│   ├── schemas/                   # Схемы Pydantic для языков, концепций и словарей
│   │   ├── __init__.py            # Инициализация схем языков
│   │   ├── concept.py             # Схемы концепций
│   │   ├── dictionary.py          # Схемы словарей
│   │   ├── language.py            # Схемы языков
│   │   └── search.py              # Схемы поиска
│   └── services/                  # Сервисы для работы с языками, концепциями и словарями
│       ├── __init__.py            # Инициализация сервисов языков
│       ├── concept_service.py     # Сервис концепций
│       ├── dictionary_service.py  # Сервис словарей
│       ├── language_service.py    # Сервис языков
│       └── search_service.py      # Сервис поиска
├── docs/                          # Документация проекта                                       # ./DOCS_STRUCTURE.md
│   ├── features/                  # Документация по функциям
│   ├── graphql/                   # Документация GraphQL
│   ├── ARCHITECTURE.md            # Архитектурные решения
│   ├── AUTH_IMPROVEMENTS.md       # Улучшения аутентификации
│   ├── BASE_MODEL_CHEATSHEET.md   # Шпаргалка по базовой модели
│   ├── BASE_MODEL_GUIDE.md        # Руководство по базовой модели
│   ├── BASE_MODEL_MIGRATION.md    # Руководство по миграции базовой модели
│   ├── BASE_MODEL_REFACTORING.md  # Руководство по рефакторингу базовой модели
│   ├── DATABASE_INITIALIZATION.md # Инициализация базы данных
│   ├── DB_LOGGING_GUIDE.md        # Руководство по логированию в БД
│   ├── DEVELOPMENT.md             # Руководство по разработке
│   ├── EMAIL_SERVICE.md           # Сервис электронной почты
│   ├── EMAIL_VERIFICATION_FLOW.md # Процесс верификации электронной почты
│   ├── IMPORT_EXPORT.md           # Импорт и экспорт данных
│   ├── MAILPIT_QUICKSTART.md      # Быстрый старт с Mailpit
│   ├── OAUTH_SETUP.md             # Настройка OAuth
│   ├── PATTERNS.md                # Паттерны проектирования
│   ├── QUICK_START.md             # Быстрый старт
│   └── SENTRY_INTEGRATION.md      # Интеграция с Sentry
├── scripts/                       # Скрипты для настройки и обслуживания                      # ./scripts/README.md
│   ├── __init__.py                # Инициализация скриптов
│   ├── _deprecated/               # Устаревшие скрипты
│   ├── seeders/                   # Скрипты для заполнения тестовыми данными
│   ├── create_import_export_table.py # Скрипт создания таблицы импорта/экспорта
│   ├── generate_env.sh            # Скрипт генерации .env файла
│   ├── README.md                  # Документация к скриптам
│   ├── seed_data_new.py           # Новый скрипт для заполнения данными
│   ├── seed_data.py               # Скрипт для заполнения тестовыми данными
│   └── test_email.py              # Скрипт для тестирования email
├── tasks/                         # Задачи для Celery                                          # ./tasks/email_tasks.py
│   ├── __init__.py                # Инициализация задач
│   ├── email_tasks.py             # Задачи для отправки email
│   ├── file_tasks.py              # Задачи для работы с файлами
│   └── periodic_tasks.py          # Периодические задачи
├── tests/                         # Тесты для backend приложения                               # ./TESTING_GUIDE.md
│   ├── __init__.py                # Инициализация тестов
│   ├── test_admin.py              # Тесты администратора
│   ├── test_app.py                # Тесты основного приложения
│   ├── test_cache_control.py      # Тесты кэширования
│   ├── test_celery_tasks.py       # Тесты задач Celery
│   ├── test_email_service.py      # Тесты email сервиса
│   ├── test_email_verification.py # Тесты верификации email
│   ├── test_graphql_playground.py # Тесты GraphQL Playground
│   ├── test_import_export.py      # Тесты импорта/экспорта
│   ├── test_metrics.py            # Тесты метрик
│   ├── test_oauth.py              # Тесты OAuth
│   ├── test_rate_limiting.py      # Тесты ограничения частоты запросов
│   ├── test_request_tracing.py    # Тесты трассировки запросов
│   ├── test_search_graphql.py     # Тесты поиска GraphQL
│   ├── test_search.py             # Тесты поиска
│   ├── test_security_headers.py   # Тесты заголовков безопасности
│   ├── test_sentry.py             # Тесты Sentry
│   └── test_service_cache.py      # Тесты кэша сервисов
├── .dockerignore                  # Список файлов/директорий игнорируемых Docker
├── .env.example                   # Пример файла переменных окружения
├── .env.production                # Файл переменных окружения для продакшена
├── .env.production.template       # Шаблон файла переменных окружения для продакшена
├── .gitignore                     # Список файлов/директорий игнорируемых Git
├── .pre-commit-config.yaml        # Конфигурация pre-commit хуков
├── alembic.ini                    # Конфигурационный файл Alembic
├── app.py                         # Основной файл приложения FastAPI
├── ARCHITECTURE.md                # Архитектурные решения проекта
├── BACKLOG.md                     # Бэклог задач
├── CHANGELOG.md                   # История изменений
├── CLAUDE.md                      # Информация для Claude AI
├── cli.py                         # Командная строка приложения
├── CONTRIBUTING.md                # Руководство для контрибьюторов
├── DEPLOYMENT.md                  # Руководство по развертыванию
├── docker-compose.dev.yml         # Docker Compose конфигурация для разработки
├── docker-compose.prod.yml        # Docker Compose конфигурация для продакшена
├── docker-compose.yml             # Основная Docker Compose конфигурация
├── Dockerfile                     # Dockerfile для продакшена
├── Dockerfile.dev                 # Dockerfile для разработки
├── DOCS_STRUCTURE.md              # Структура документации
├── EMAIL_VERIFICATION_IMPLEMENTATION.md # Реализация верификации email
├── fix_db_connections.py          # Скрипт исправления соединений с БД
├── fix_quotes.py                  # Скрипт исправления кавычек
├── LICENSE                        # Лицензия проекта
├── MAILPIT_IMPLEMENTATION.md      # Реализация Mailpit
├── PRODUCTION_DEPLOYMENT.md       # Руководство по продакшен деплою
├── pytest.ini                     # Конфигурационный файл Pytest
├── QUICKSTART.md                  # Краткое руководство по началу работы
├── README.MD                      # Основной файл документации проекта
├── requirements.txt               # Зависимости Python проекта
├── SIMPLE_DOMAIN_INIT.md          # Инициализация простой доменной модели
├── test_upload.py                 # Тесты загрузки файлов
└── TESTING_GUIDE.md               # Руководство по тестированию

```

## Как поддерживать карту в актуальном состоянии

Для поддержания карты в актуальном состоянии рекомендуется:

1. При добавлении новой папки или файла обновлять этот документ
2. При изменении функционала обновлять описания файлов
3. Периодически сверять структуру с актуальным состоянием проекта
4. Использовать автоматические инструменты для генерации подобных карт (если возможно)

---

## Инструкции по работе с файлом для ИИ-моделей

Данный файл представляет собой карту файловой структуры проекта backend, оформленную в формате, оптимизированном для ИИ-моделей. Формат включает три столбца:

1. **Путь и файлы проекта Backend** - содержит древовидную структуру с именами файлов и директорий
2. **Описание функций файла с исходным кодом приложения** - поясняет назначение каждого файла или директории
3. **Файл с документацией по исходному коду** - путь к связанному документу с подробной документацией (если доступен)

### Правила работы с файлом:

1. Используйте структуру для понимания архитектуры проекта
2. Символы ├ ├── └ │ указывают на иерархию файлов и директорий
3. Если третий столбец пустой, значит документация для этого элемента отсутствует
4. Используйте поисковые функции для быстрого нахождения конкретных файлов
5. Описания во втором столбце помогут понять функциональное назначение элементов
6. Для навигации по проекту опирайтесь на структуру иерархии

### Пример чтения строки:
```
├── auth/                          # Модуль аутентификации и авторизации                        # ./docs/EMAIL_VERIFICATION_IMPLEMENTATION.md
```
- `├── auth/` - директория на корневом уровне
- `# Модуль аутентификации и авторизации` - краткое описание
- `# ./docs/EMAIL_VERIFICATION_IMPLEMENTATION.md` - путь к подробной документации